<!DOCTYPE html>
<html>
<head>
  <title>Zazzies | GE</title>
  <link rel="stylesheet" href="stylesheets/style.css"></link>
  <link rel="icon" href="/images/zazzies_icon.ico"></link>

</head>
<body>
  <div class="header">
    <h2>Zazzies™ powered by 
    <a href="https://www.predix.io">
      <img src="/images/predix_logo.png" alt="predix_logo">
      </a>
      </h2>
    <h4>The premier cat-loving messaging service.</h4>
    <ul class="topnav" id="myTopnav">
      <li><a href="/index.html">Home</a></li>
      <li><a class="active" href="/post.html">Post</a></li>
      <li><a href="/contact.html">Contact</a></li>
      <li><a href="/about.html">About</a></li>
      <li class="icon">
        <a href="javascript:void(0);" style="font-size:15px;" onclick="topnavCollapse()">☰</a>
      </li>
    </ul>
  </div>
<script>
function topnavCollapse() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
        x.className += " responsive";
    } else {
        x.className = "topnav";
    }
}
</script>


<div class="container">
    <h2>Make a Post!</h2>
    <p>Zazzle your friends! 
    </p>

    <p><br></p>
    <div id="cat_picture"> 
        <p><br></p>
        <p><br></p>
        <p><br></p>
    </div>
    <div id="usernameArea">
    </div>
    <div id="messageArea">
    </div>
    <p><br></p>


    <div class="dropdown">
    <button class="dropbtn">Pick a cat!</button>
    <div class="dropdown-content">
        <a href="" onclick="catSelect('Melon'); return false;">Melon Cat</a>
        <a href="" onclick="catSelect('Orange'); return false;">Orange Cat</a>
        <a href="" onclick="catSelect('Burger'); return false;">Burger Cat</a>
        <a href="" onclick="catSelect('Ramen'); return false;">Ramen Cat</a>
        <a href="" onclick="catSelect('Santa'); return false;">Santa Cat</a>
        <a href="" onclick="catSelect('Flower'); return false;">Flower Cat</a>
        <a href="" onclick="catSelect('Watermelon'); return false;">Watermelon Cat</a>
        <a href="" onclick="catSelect('Windmill'); return false;">Windmill Cat</a>

    </div>
    </div>
<script>
function catSelect(cat){
   //alert("Cat selected: " + cat);
   var innerPicture = "<img src='/images/predix_logo.png' alt='predix_logo'>";
   switch(cat){
       case "Melon":
        innerPicture = "<img src='/images/melon_cat.gif' id='selected_picture' alt='cat_01'>";
        break;
       case "Orange":
        innerPicture = "<img src='/images/orange_cats.gif' id='selected_picture' alt='cat_02'>";
        break;
       case "Burger":
        innerPicture = "<img src='/images/burger_cats.gif' id='selected_picture' alt='cat_03'>";
        break;
       case "Ramen":
        innerPicture = "<img src='/images/ramen_cats.gif' id='selected_picture' alt='cat_04'>";
        break;
       case "Santa":
        innerPicture = "<img src='/images/santa_cat.gif' id='selected_picture' alt='cat_05'>";
        break;
       case "Flower":
        innerPicture = "<img src='/images/flower_cat.gif' id='selected_picture' alt='cat_06'>";
        break;
       case "Watermelon":
        innerPicture = "<img src='/images/watermelon_cats.gif' id='selected_picture' alt='cat_07'>";
        break;
       case "Windmill":
        innerPicture = "<img src='/images/windmill_cat.gif' id='selected_picture' alt='cat_07'>";
        break;
       default:
        innerPicture = "<img src='/images/melon_cat.gif' id='selected_picture' alt='cat_08'>";
        break;       
   }
//    var form = "<form action='/makepost' method='post'>" + innerPicture + "<p><br></p><input type='text' id='usernametext' placeholder='Enter Your Name Here!'/> <p><br></p><input type='text' id='messagetext' placeholder='Enter Message Here!'/><input type='submit' value='Zazzle!'/></form>";
//    document.getElementById("cat_picture").innerHTML = form;
   var usernameBox = "<p><br></p><input type='text' id='usernametext' placeholder='Enter Your Name Here!'/>";
   var messageBox = "<p><br></p><input type='text' id='messagetext' placeholder='Enter Message Here!'/>";
   var zazzle_btn = "<button class='dropbtn'>Zazzle!</button>";
   document.getElementById("zazzleButton").innerHTML = zazzle_btn;
   document.getElementById("cat_picture").innerHTML = innerPicture;
   document.getElementById("messageArea").innerHTML = messageBox; 
   document.getElementById("usernameArea").innerHTML = usernameBox;
} 

function submitPost(){
    var cat_image = document.getElementById("cat_picture").innerHTML;
    var message_text = document.getElementById("messagetext").value;
    var alt_text = document.getElementById("selected_picture").alt;
    //writeToFile("test");
    alert("Cat selected: " + cat_image + "\nMessage: " +  message_text + " " + message_text.length + "\nAlt text: " + alt_text);
}

</script>


<p><br></p>
<p><br></p>

    <script src="/scripts/jquery.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('#zazzleButton').click(function() {
            // run an AJAX post request to the route you setup above...
            // respect the cross-domain policy by using the same domain
            // you used to access your index.html file!
            try{
                var cat_image = document.getElementById("cat_picture").innerHTML;
                var message_text = document.getElementById("messagetext").value;
                var username = document.getElementById("usernametext").value;
                
                if (username.length > 0 && message_text.length > 0 && !message_text.includes("<") && !message_text.includes(">") && !username.includes("<") && !username.includes(">")){
                    // $.ajax({
                    //     type: 'POST';
                    //     url: '/makepost';
                    //     data: {image: cat_image, message: message_text, user: username}
                    //     async: false
                    // })
                    $.post('/makepost', {image: cat_image, message: message_text, user: username}, function() {
                        //$('#response').html(list); // show the list
                    });
                    window.location = "\index.html";

                }
                else{
                    alert("Please enter a valid name and a message!");
                }
            } catch(err){
                alert(err);
            }

        });
    });
    </script>


<div id="zazzleButton">

</div>


</div>
<div style="text-align:center; color=white">    
    <p>©2016 General Electric</p>
</div>
  <div class="footer">
  <div class="footer-logo-container">
      <a href="http://www.ge.com/digital">
      <img class="footer-logo" src="/images/monogram-wdmk.png">
      </a>
   </div>   
  </div>

</body>
</html>